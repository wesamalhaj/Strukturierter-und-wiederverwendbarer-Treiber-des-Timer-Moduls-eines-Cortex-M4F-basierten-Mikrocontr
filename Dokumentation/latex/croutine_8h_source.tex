\doxysection{croutine.\+h}
\label{croutine_8h_source}\index{rtos/FreeRTOS/source/include/croutine.h@{rtos/FreeRTOS/source/include/croutine.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001 \textcolor{comment}{/*}}
\DoxyCodeLine{00002 \textcolor{comment}{ * FreeRTOS Kernel V10.2.1}}
\DoxyCodeLine{00003 \textcolor{comment}{ * Copyright (C) 2019 Amazon.com, Inc. or its affiliates.  All Rights Reserved.}}
\DoxyCodeLine{00004 \textcolor{comment}{ *}}
\DoxyCodeLine{00005 \textcolor{comment}{ * Permission is hereby granted, free of charge, to any person obtaining a copy of}}
\DoxyCodeLine{00006 \textcolor{comment}{ * this software and associated documentation files (the "{}Software"{}), to deal in}}
\DoxyCodeLine{00007 \textcolor{comment}{ * the Software without restriction, including without limitation the rights to}}
\DoxyCodeLine{00008 \textcolor{comment}{ * use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of}}
\DoxyCodeLine{00009 \textcolor{comment}{ * the Software, and to permit persons to whom the Software is furnished to do so,}}
\DoxyCodeLine{00010 \textcolor{comment}{ * subject to the following conditions:}}
\DoxyCodeLine{00011 \textcolor{comment}{ *}}
\DoxyCodeLine{00012 \textcolor{comment}{ * The above copyright notice and this permission notice shall be included in all}}
\DoxyCodeLine{00013 \textcolor{comment}{ * copies or substantial portions of the Software.}}
\DoxyCodeLine{00014 \textcolor{comment}{ *}}
\DoxyCodeLine{00015 \textcolor{comment}{ * THE SOFTWARE IS PROVIDED "{}AS IS"{}, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR}}
\DoxyCodeLine{00016 \textcolor{comment}{ * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS}}
\DoxyCodeLine{00017 \textcolor{comment}{ * FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR}}
\DoxyCodeLine{00018 \textcolor{comment}{ * COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER}}
\DoxyCodeLine{00019 \textcolor{comment}{ * IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN}}
\DoxyCodeLine{00020 \textcolor{comment}{ * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.}}
\DoxyCodeLine{00021 \textcolor{comment}{ *}}
\DoxyCodeLine{00022 \textcolor{comment}{ * http://www.FreeRTOS.org}}
\DoxyCodeLine{00023 \textcolor{comment}{ * http://aws.amazon.com/freertos}}
\DoxyCodeLine{00024 \textcolor{comment}{ *}}
\DoxyCodeLine{00025 \textcolor{comment}{ * 1 tab == 4 spaces!}}
\DoxyCodeLine{00026 \textcolor{comment}{ */}}
\DoxyCodeLine{00027 }
\DoxyCodeLine{00028 \textcolor{preprocessor}{\#ifndef CO\_ROUTINE\_H}}
\DoxyCodeLine{00029 \textcolor{preprocessor}{\#define CO\_ROUTINE\_H}}
\DoxyCodeLine{00030 }
\DoxyCodeLine{00031 \textcolor{preprocessor}{\#ifndef INC\_FREERTOS\_H}}
\DoxyCodeLine{00032 \textcolor{preprocessor}{    \#error "{}include FreeRTOS.h must appear in source files before include croutine.h"{}}}
\DoxyCodeLine{00033 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00034 }
\DoxyCodeLine{00035 \textcolor{preprocessor}{\#include "{}list.h"{}}}
\DoxyCodeLine{00036 }
\DoxyCodeLine{00037 \textcolor{preprocessor}{\#ifdef \_\_cplusplus}}
\DoxyCodeLine{00038 \textcolor{keyword}{extern} \textcolor{stringliteral}{"{}C"{}} \{}
\DoxyCodeLine{00039 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00040 }
\DoxyCodeLine{00041 \textcolor{comment}{/* Used to hide the implementation of the co-\/routine control block.  The}}
\DoxyCodeLine{00042 \textcolor{comment}{control block structure however has to be included in the header due to}}
\DoxyCodeLine{00043 \textcolor{comment}{the macro implementation of the co-\/routine functionality. */}}
\DoxyCodeLine{00044 \textcolor{keyword}{typedef} \textcolor{keywordtype}{void} * CoRoutineHandle\_t;}
\DoxyCodeLine{00045 }
\DoxyCodeLine{00046 \textcolor{comment}{/* Defines the prototype to which co-\/routine functions must conform. */}}
\DoxyCodeLine{00047 \textcolor{keyword}{typedef} void (*crCOROUTINE\_CODE)( CoRoutineHandle\_t, UBaseType\_t );}
\DoxyCodeLine{00048 }
\DoxyCodeLine{00049 \textcolor{keyword}{typedef} \textcolor{keyword}{struct }corCoRoutineControlBlock}
\DoxyCodeLine{00050 \{}
\DoxyCodeLine{00051     crCOROUTINE\_CODE    pxCoRoutineFunction;}
\DoxyCodeLine{00052     ListItem\_t            xGenericListItem;   \textcolor{comment}{/*< List item used to place the CRCB in ready and blocked queues. */}}
\DoxyCodeLine{00053     ListItem\_t            xEventListItem;     \textcolor{comment}{/*< List item used to place the CRCB in event lists. */}}
\DoxyCodeLine{00054     UBaseType\_t         uxPriority;         \textcolor{comment}{/*< The priority of the co-\/routine in relation to other co-\/routines. */}}
\DoxyCodeLine{00055     UBaseType\_t         uxIndex;            \textcolor{comment}{/*< Used to distinguish between co-\/routines when multiple co-\/routines use the same co-\/routine function. */}}
\DoxyCodeLine{00056     uint16\_t            uxState;            \textcolor{comment}{/*< Used internally by the co-\/routine implementation. */}}
\DoxyCodeLine{00057 \} CRCB\_t; \textcolor{comment}{/* Co-\/routine control block.  Note must be identical in size down to uxPriority with TCB\_t. */}}
\DoxyCodeLine{00058 }
\DoxyCodeLine{00131 BaseType\_t xCoRoutineCreate( crCOROUTINE\_CODE pxCoRoutineCode, UBaseType\_t uxPriority, UBaseType\_t uxIndex );}
\DoxyCodeLine{00132 }
\DoxyCodeLine{00133 }
\DoxyCodeLine{00173 \textcolor{keywordtype}{void} vCoRoutineSchedule( \textcolor{keywordtype}{void} );}
\DoxyCodeLine{00174 }
\DoxyCodeLine{00204 \textcolor{preprocessor}{\#define crSTART( pxCRCB ) switch( ( ( CRCB\_t * )( pxCRCB ) )-\/>uxState ) \{ case 0:}}
\DoxyCodeLine{00205 }
\DoxyCodeLine{00235 \textcolor{preprocessor}{\#define crEND() \}}}
\DoxyCodeLine{00236 }
\DoxyCodeLine{00237 \textcolor{comment}{/*}}
\DoxyCodeLine{00238 \textcolor{comment}{ * These macros are intended for internal use by the co-\/routine implementation}}
\DoxyCodeLine{00239 \textcolor{comment}{ * only.  The macros should not be used directly by application writers.}}
\DoxyCodeLine{00240 \textcolor{comment}{ */}}
\DoxyCodeLine{00241 \textcolor{preprocessor}{\#define crSET\_STATE0( xHandle ) ( ( CRCB\_t * )( xHandle ) )-\/>uxState = (\_\_LINE\_\_ * 2); return; case (\_\_LINE\_\_ * 2):}}
\DoxyCodeLine{00242 \textcolor{preprocessor}{\#define crSET\_STATE1( xHandle ) ( ( CRCB\_t * )( xHandle ) )-\/>uxState = ((\_\_LINE\_\_ * 2)+1); return; case ((\_\_LINE\_\_ * 2)+1):}}
\DoxyCodeLine{00243 }
\DoxyCodeLine{00290 \textcolor{preprocessor}{\#define crDELAY( xHandle, xTicksToDelay )                                               \(\backslash\)}}
\DoxyCodeLine{00291 \textcolor{preprocessor}{    if( ( xTicksToDelay ) > 0 )                                                         \(\backslash\)}}
\DoxyCodeLine{00292 \textcolor{preprocessor}{    \{                                                                                   \(\backslash\)}}
\DoxyCodeLine{00293 \textcolor{preprocessor}{        vCoRoutineAddToDelayedList( ( xTicksToDelay ), NULL );                          \(\backslash\)}}
\DoxyCodeLine{00294 \textcolor{preprocessor}{    \}                                                                                   \(\backslash\)}}
\DoxyCodeLine{00295 \textcolor{preprocessor}{    crSET\_STATE0( ( xHandle ) );}}
\DoxyCodeLine{00296 }
\DoxyCodeLine{00380 \textcolor{preprocessor}{\#define crQUEUE\_SEND( xHandle, pxQueue, pvItemToQueue, xTicksToWait, pxResult )         \(\backslash\)}}
\DoxyCodeLine{00381 \textcolor{preprocessor}{\{                                                                                       \(\backslash\)}}
\DoxyCodeLine{00382 \textcolor{preprocessor}{    *( pxResult ) = xQueueCRSend( ( pxQueue) , ( pvItemToQueue) , ( xTicksToWait ) );   \(\backslash\)}}
\DoxyCodeLine{00383 \textcolor{preprocessor}{    if( *( pxResult ) == errQUEUE\_BLOCKED )                                             \(\backslash\)}}
\DoxyCodeLine{00384 \textcolor{preprocessor}{    \{                                                                                   \(\backslash\)}}
\DoxyCodeLine{00385 \textcolor{preprocessor}{        crSET\_STATE0( ( xHandle ) );                                                    \(\backslash\)}}
\DoxyCodeLine{00386 \textcolor{preprocessor}{        *pxResult = xQueueCRSend( ( pxQueue ), ( pvItemToQueue ), 0 );                  \(\backslash\)}}
\DoxyCodeLine{00387 \textcolor{preprocessor}{    \}                                                                                   \(\backslash\)}}
\DoxyCodeLine{00388 \textcolor{preprocessor}{    if( *pxResult == errQUEUE\_YIELD )                                                   \(\backslash\)}}
\DoxyCodeLine{00389 \textcolor{preprocessor}{    \{                                                                                   \(\backslash\)}}
\DoxyCodeLine{00390 \textcolor{preprocessor}{        crSET\_STATE1( ( xHandle ) );                                                    \(\backslash\)}}
\DoxyCodeLine{00391 \textcolor{preprocessor}{        *pxResult = pdPASS;                                                             \(\backslash\)}}
\DoxyCodeLine{00392 \textcolor{preprocessor}{    \}                                                                                   \(\backslash\)}}
\DoxyCodeLine{00393 \textcolor{preprocessor}{\}}}
\DoxyCodeLine{00394 }
\DoxyCodeLine{00472 \textcolor{preprocessor}{\#define crQUEUE\_RECEIVE( xHandle, pxQueue, pvBuffer, xTicksToWait, pxResult )           \(\backslash\)}}
\DoxyCodeLine{00473 \textcolor{preprocessor}{\{                                                                                       \(\backslash\)}}
\DoxyCodeLine{00474 \textcolor{preprocessor}{    *( pxResult ) = xQueueCRReceive( ( pxQueue) , ( pvBuffer ), ( xTicksToWait ) );     \(\backslash\)}}
\DoxyCodeLine{00475 \textcolor{preprocessor}{    if( *( pxResult ) == errQUEUE\_BLOCKED )                                             \(\backslash\)}}
\DoxyCodeLine{00476 \textcolor{preprocessor}{    \{                                                                                   \(\backslash\)}}
\DoxyCodeLine{00477 \textcolor{preprocessor}{        crSET\_STATE0( ( xHandle ) );                                                    \(\backslash\)}}
\DoxyCodeLine{00478 \textcolor{preprocessor}{        *( pxResult ) = xQueueCRReceive( ( pxQueue) , ( pvBuffer ), 0 );                \(\backslash\)}}
\DoxyCodeLine{00479 \textcolor{preprocessor}{    \}                                                                                   \(\backslash\)}}
\DoxyCodeLine{00480 \textcolor{preprocessor}{    if( *( pxResult ) == errQUEUE\_YIELD )                                               \(\backslash\)}}
\DoxyCodeLine{00481 \textcolor{preprocessor}{    \{                                                                                   \(\backslash\)}}
\DoxyCodeLine{00482 \textcolor{preprocessor}{        crSET\_STATE1( ( xHandle ) );                                                    \(\backslash\)}}
\DoxyCodeLine{00483 \textcolor{preprocessor}{        *( pxResult ) = pdPASS;                                                         \(\backslash\)}}
\DoxyCodeLine{00484 \textcolor{preprocessor}{    \}                                                                                   \(\backslash\)}}
\DoxyCodeLine{00485 \textcolor{preprocessor}{\}}}
\DoxyCodeLine{00486 }
\DoxyCodeLine{00581 \textcolor{preprocessor}{\#define crQUEUE\_SEND\_FROM\_ISR( pxQueue, pvItemToQueue, xCoRoutinePreviouslyWoken ) xQueueCRSendFromISR( ( pxQueue ), ( pvItemToQueue ), ( xCoRoutinePreviouslyWoken ) )}}
\DoxyCodeLine{00582 }
\DoxyCodeLine{00583 }
\DoxyCodeLine{00694 \textcolor{preprocessor}{\#define crQUEUE\_RECEIVE\_FROM\_ISR( pxQueue, pvBuffer, pxCoRoutineWoken ) xQueueCRReceiveFromISR( ( pxQueue ), ( pvBuffer ), ( pxCoRoutineWoken ) )}}
\DoxyCodeLine{00695 }
\DoxyCodeLine{00696 \textcolor{comment}{/*}}
\DoxyCodeLine{00697 \textcolor{comment}{ * This function is intended for internal use by the co-\/routine macros only.}}
\DoxyCodeLine{00698 \textcolor{comment}{ * The macro nature of the co-\/routine implementation requires that the}}
\DoxyCodeLine{00699 \textcolor{comment}{ * prototype appears here.  The function should not be used by application}}
\DoxyCodeLine{00700 \textcolor{comment}{ * writers.}}
\DoxyCodeLine{00701 \textcolor{comment}{ *}}
\DoxyCodeLine{00702 \textcolor{comment}{ * Removes the current co-\/routine from its ready list and places it in the}}
\DoxyCodeLine{00703 \textcolor{comment}{ * appropriate delayed list.}}
\DoxyCodeLine{00704 \textcolor{comment}{ */}}
\DoxyCodeLine{00705 \textcolor{keywordtype}{void} vCoRoutineAddToDelayedList( TickType\_t xTicksToDelay, List\_t *pxEventList );}
\DoxyCodeLine{00706 }
\DoxyCodeLine{00707 \textcolor{comment}{/*}}
\DoxyCodeLine{00708 \textcolor{comment}{ * This function is intended for internal use by the queue implementation only.}}
\DoxyCodeLine{00709 \textcolor{comment}{ * The function should not be used by application writers.}}
\DoxyCodeLine{00710 \textcolor{comment}{ *}}
\DoxyCodeLine{00711 \textcolor{comment}{ * Removes the highest priority co-\/routine from the event list and places it in}}
\DoxyCodeLine{00712 \textcolor{comment}{ * the pending ready list.}}
\DoxyCodeLine{00713 \textcolor{comment}{ */}}
\DoxyCodeLine{00714 BaseType\_t xCoRoutineRemoveFromEventList( \textcolor{keyword}{const} List\_t *pxEventList );}
\DoxyCodeLine{00715 }
\DoxyCodeLine{00716 \textcolor{preprocessor}{\#ifdef \_\_cplusplus}}
\DoxyCodeLine{00717 \}}
\DoxyCodeLine{00718 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00719 }
\DoxyCodeLine{00720 \textcolor{preprocessor}{\#endif }\textcolor{comment}{/* CO\_ROUTINE\_H */}\textcolor{preprocessor}{}}

\end{DoxyCode}
