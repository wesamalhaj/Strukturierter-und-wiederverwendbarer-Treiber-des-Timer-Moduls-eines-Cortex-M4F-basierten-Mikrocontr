\doxysection{portmacro.\+h}
\label{portmacro_8h_source}\index{rtos/FreeRTOS/source/portable/CCS/ARM\_CM4F/portmacro.h@{rtos/FreeRTOS/source/portable/CCS/ARM\_CM4F/portmacro.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001 \textcolor{comment}{/*}}
\DoxyCodeLine{00002 \textcolor{comment}{ * FreeRTOS Kernel V10.2.1}}
\DoxyCodeLine{00003 \textcolor{comment}{ * Copyright (C) 2019 Amazon.com, Inc. or its affiliates.  All Rights Reserved.}}
\DoxyCodeLine{00004 \textcolor{comment}{ *}}
\DoxyCodeLine{00005 \textcolor{comment}{ * Permission is hereby granted, free of charge, to any person obtaining a copy of}}
\DoxyCodeLine{00006 \textcolor{comment}{ * this software and associated documentation files (the "{}Software"{}), to deal in}}
\DoxyCodeLine{00007 \textcolor{comment}{ * the Software without restriction, including without limitation the rights to}}
\DoxyCodeLine{00008 \textcolor{comment}{ * use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of}}
\DoxyCodeLine{00009 \textcolor{comment}{ * the Software, and to permit persons to whom the Software is furnished to do so,}}
\DoxyCodeLine{00010 \textcolor{comment}{ * subject to the following conditions:}}
\DoxyCodeLine{00011 \textcolor{comment}{ *}}
\DoxyCodeLine{00012 \textcolor{comment}{ * The above copyright notice and this permission notice shall be included in all}}
\DoxyCodeLine{00013 \textcolor{comment}{ * copies or substantial portions of the Software.}}
\DoxyCodeLine{00014 \textcolor{comment}{ *}}
\DoxyCodeLine{00015 \textcolor{comment}{ * THE SOFTWARE IS PROVIDED "{}AS IS"{}, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR}}
\DoxyCodeLine{00016 \textcolor{comment}{ * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS}}
\DoxyCodeLine{00017 \textcolor{comment}{ * FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR}}
\DoxyCodeLine{00018 \textcolor{comment}{ * COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER}}
\DoxyCodeLine{00019 \textcolor{comment}{ * IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN}}
\DoxyCodeLine{00020 \textcolor{comment}{ * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.}}
\DoxyCodeLine{00021 \textcolor{comment}{ *}}
\DoxyCodeLine{00022 \textcolor{comment}{ * http://www.FreeRTOS.org}}
\DoxyCodeLine{00023 \textcolor{comment}{ * http://aws.amazon.com/freertos}}
\DoxyCodeLine{00024 \textcolor{comment}{ *}}
\DoxyCodeLine{00025 \textcolor{comment}{ * 1 tab == 4 spaces!}}
\DoxyCodeLine{00026 \textcolor{comment}{ */}}
\DoxyCodeLine{00027 }
\DoxyCodeLine{00028 }
\DoxyCodeLine{00029 \textcolor{preprocessor}{\#ifndef PORTMACRO\_H}}
\DoxyCodeLine{00030 \textcolor{preprocessor}{\#define PORTMACRO\_H}}
\DoxyCodeLine{00031 }
\DoxyCodeLine{00032 \textcolor{preprocessor}{\#ifdef \_\_cplusplus}}
\DoxyCodeLine{00033 \textcolor{keyword}{extern} \textcolor{stringliteral}{"{}C"{}} \{}
\DoxyCodeLine{00034 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00035 }
\DoxyCodeLine{00036 \textcolor{comment}{/*-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00037 \textcolor{comment}{ * Port specific definitions.}}
\DoxyCodeLine{00038 \textcolor{comment}{ *}}
\DoxyCodeLine{00039 \textcolor{comment}{ * The settings in this file configure FreeRTOS correctly for the}}
\DoxyCodeLine{00040 \textcolor{comment}{ * given hardware and compiler.}}
\DoxyCodeLine{00041 \textcolor{comment}{ *}}
\DoxyCodeLine{00042 \textcolor{comment}{ * These settings should not be altered.}}
\DoxyCodeLine{00043 \textcolor{comment}{ *-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{00044 \textcolor{comment}{ */}}
\DoxyCodeLine{00045 }
\DoxyCodeLine{00046 \textcolor{comment}{/* Type definitions. */}}
\DoxyCodeLine{00047 \textcolor{preprocessor}{\#define portCHAR        char}}
\DoxyCodeLine{00048 \textcolor{preprocessor}{\#define portFLOAT       float}}
\DoxyCodeLine{00049 \textcolor{preprocessor}{\#define portDOUBLE      double}}
\DoxyCodeLine{00050 \textcolor{preprocessor}{\#define portLONG        long}}
\DoxyCodeLine{00051 \textcolor{preprocessor}{\#define portSHORT       short}}
\DoxyCodeLine{00052 \textcolor{preprocessor}{\#define portSTACK\_TYPE  uint32\_t}}
\DoxyCodeLine{00053 \textcolor{preprocessor}{\#define portBASE\_TYPE   long}}
\DoxyCodeLine{00054 }
\DoxyCodeLine{00055 \textcolor{keyword}{typedef} portSTACK\_TYPE StackType\_t;}
\DoxyCodeLine{00056 \textcolor{keyword}{typedef} \textcolor{keywordtype}{long} BaseType\_t;}
\DoxyCodeLine{00057 \textcolor{keyword}{typedef} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} UBaseType\_t;}
\DoxyCodeLine{00058 }
\DoxyCodeLine{00059 \textcolor{preprocessor}{\#if( configUSE\_16\_BIT\_TICKS == 1 )}}
\DoxyCodeLine{00060     \textcolor{keyword}{typedef} uint16\_t TickType\_t;}
\DoxyCodeLine{00061 \textcolor{preprocessor}{    \#define portMAX\_DELAY ( TickType\_t ) 0xffff}}
\DoxyCodeLine{00062 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00063     \textcolor{keyword}{typedef} uint32\_t TickType\_t;}
\DoxyCodeLine{00064 \textcolor{preprocessor}{    \#define portMAX\_DELAY ( TickType\_t ) 0xffffffffUL}}
\DoxyCodeLine{00065 }
\DoxyCodeLine{00066     \textcolor{comment}{/* 32-\/bit tick type on a 32-\/bit architecture, so reads of the tick count do}}
\DoxyCodeLine{00067 \textcolor{comment}{    not need to be guarded with a critical section. */}}
\DoxyCodeLine{00068 \textcolor{preprocessor}{    \#define portTICK\_TYPE\_IS\_ATOMIC 1}}
\DoxyCodeLine{00069 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00070 \textcolor{comment}{/*-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{00071 }
\DoxyCodeLine{00072 \textcolor{comment}{/* Architecture specifics. */}}
\DoxyCodeLine{00073 \textcolor{preprocessor}{\#define portSTACK\_GROWTH            ( -\/1 )}}
\DoxyCodeLine{00074 \textcolor{preprocessor}{\#define portTICK\_PERIOD\_MS          ( ( TickType\_t ) 1000 / configTICK\_RATE\_HZ )}}
\DoxyCodeLine{00075 \textcolor{preprocessor}{\#define portBYTE\_ALIGNMENT          8}}
\DoxyCodeLine{00076 \textcolor{comment}{/*-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{00077 }
\DoxyCodeLine{00078 \textcolor{comment}{/* Scheduler utilities. */}}
\DoxyCodeLine{00079 \textcolor{preprocessor}{\#define portYIELD()                                         \(\backslash\)}}
\DoxyCodeLine{00080 \textcolor{preprocessor}{\{                                                           \(\backslash\)}}
\DoxyCodeLine{00081 \textcolor{preprocessor}{    }\textcolor{comment}{/* Set a PendSV to request a context switch. */}\textcolor{preprocessor}{         \(\backslash\)}}
\DoxyCodeLine{00082 \textcolor{preprocessor}{    portNVIC\_INT\_CTRL\_REG = portNVIC\_PENDSVSET\_BIT;         \(\backslash\)}}
\DoxyCodeLine{00083 \textcolor{preprocessor}{    \_\_asm( "{}    dsb"{}} );                                     \(\backslash\)}
\DoxyCodeLine{00084     \_\_asm( "{}    isb"{} );                                     \(\backslash\)}
\DoxyCodeLine{00085 \}}
\DoxyCodeLine{00086 }
\DoxyCodeLine{00087 \textcolor{preprocessor}{\#define portNVIC\_INT\_CTRL\_REG       ( * ( ( volatile uint32\_t * ) 0xe000ed04 ) )}}
\DoxyCodeLine{00088 \textcolor{preprocessor}{\#define portNVIC\_PENDSVSET\_BIT      ( 1UL << 28UL )}}
\DoxyCodeLine{00089 \textcolor{preprocessor}{\#define portEND\_SWITCHING\_ISR( xSwitchRequired ) if( xSwitchRequired != pdFALSE ) portYIELD()}}
\DoxyCodeLine{00090 \textcolor{preprocessor}{\#define portYIELD\_FROM\_ISR( x ) portEND\_SWITCHING\_ISR( x )}}
\DoxyCodeLine{00091 }
\DoxyCodeLine{00092 \textcolor{comment}{/*-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{00093 }
\DoxyCodeLine{00094 \textcolor{comment}{/* Architecture specific optimisations. */}}
\DoxyCodeLine{00095 \textcolor{preprocessor}{\#ifndef configUSE\_PORT\_OPTIMISED\_TASK\_SELECTION}}
\DoxyCodeLine{00096 \textcolor{preprocessor}{    \#define configUSE\_PORT\_OPTIMISED\_TASK\_SELECTION 1}}
\DoxyCodeLine{00097 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00098 }
\DoxyCodeLine{00099 \textcolor{preprocessor}{\#if configUSE\_PORT\_OPTIMISED\_TASK\_SELECTION == 1}}
\DoxyCodeLine{00100 }
\DoxyCodeLine{00101     \textcolor{comment}{/* Check the configuration. */}}
\DoxyCodeLine{00102 \textcolor{preprocessor}{    \#if( configMAX\_PRIORITIES > 32 )}}
\DoxyCodeLine{00103 \textcolor{preprocessor}{        \#error configUSE\_PORT\_OPTIMISED\_TASK\_SELECTION can only be set to 1 when configMAX\_PRIORITIES is less than or equal to 32.  It is very rare that a system requires more than 10 to 15 difference priorities as tasks that share a priority will time slice.}}
\DoxyCodeLine{00104 \textcolor{preprocessor}{    \#endif}}
\DoxyCodeLine{00105 }
\DoxyCodeLine{00106     \textcolor{comment}{/* Store/clear the ready priorities in a bit map. */}}
\DoxyCodeLine{00107 \textcolor{preprocessor}{    \#define portRECORD\_READY\_PRIORITY( uxPriority, uxReadyPriorities ) ( uxReadyPriorities ) |= ( 1UL << ( uxPriority ) )}}
\DoxyCodeLine{00108 \textcolor{preprocessor}{    \#define portRESET\_READY\_PRIORITY( uxPriority, uxReadyPriorities ) ( uxReadyPriorities ) \&= \string~( 1UL << ( uxPriority ) )}}
\DoxyCodeLine{00109 }
\DoxyCodeLine{00110     \textcolor{comment}{/*-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{00111 }
\DoxyCodeLine{00112 \textcolor{preprocessor}{    \#define portGET\_HIGHEST\_PRIORITY( uxTopPriority, uxReadyPriorities ) uxTopPriority = ( 31 -\/ \_\_clz( ( uxReadyPriorities ) ) )}}
\DoxyCodeLine{00113 }
\DoxyCodeLine{00114 \textcolor{preprocessor}{\#endif }\textcolor{comment}{/* configUSE\_PORT\_OPTIMISED\_TASK\_SELECTION */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00115 \textcolor{comment}{/*-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{00116 }
\DoxyCodeLine{00117 \textcolor{comment}{/* Critical section management. */}}
\DoxyCodeLine{00118 \textcolor{keyword}{extern} \textcolor{keywordtype}{void} vPortEnterCritical( \textcolor{keywordtype}{void} );}
\DoxyCodeLine{00119 \textcolor{keyword}{extern} \textcolor{keywordtype}{void} vPortExitCritical( \textcolor{keywordtype}{void} );}
\DoxyCodeLine{00120 }
\DoxyCodeLine{00121 \textcolor{preprocessor}{\#define portDISABLE\_INTERRUPTS()                                        \(\backslash\)}}
\DoxyCodeLine{00122 \textcolor{preprocessor}{\{                                                                       \(\backslash\)}}
\DoxyCodeLine{00123 \textcolor{preprocessor}{    \_set\_interrupt\_priority( configMAX\_SYSCALL\_INTERRUPT\_PRIORITY );    \(\backslash\)}}
\DoxyCodeLine{00124 \textcolor{preprocessor}{    \_\_asm( "{}    dsb"{}} );                                                 \(\backslash\)}
\DoxyCodeLine{00125     \_\_asm( "{}    isb"{} );                                                 \(\backslash\)}
\DoxyCodeLine{00126 \}}
\DoxyCodeLine{00127 }
\DoxyCodeLine{00128 \textcolor{preprocessor}{\#define portENABLE\_INTERRUPTS()                 \_set\_interrupt\_priority( 0 )}}
\DoxyCodeLine{00129 \textcolor{preprocessor}{\#define portENTER\_CRITICAL()                    vPortEnterCritical()}}
\DoxyCodeLine{00130 \textcolor{preprocessor}{\#define portEXIT\_CRITICAL()                     vPortExitCritical()}}
\DoxyCodeLine{00131 \textcolor{preprocessor}{\#define portSET\_INTERRUPT\_MASK\_FROM\_ISR()       \_set\_interrupt\_priority( configMAX\_SYSCALL\_INTERRUPT\_PRIORITY ); \_\_asm( "{}   dsb"{}} ); \_\_asm( "{}    isb"{} )}
\DoxyCodeLine{00132 \textcolor{preprocessor}{\#define portCLEAR\_INTERRUPT\_MASK\_FROM\_ISR(x)    \_set\_interrupt\_priority( x )}}
\DoxyCodeLine{00133 \textcolor{comment}{/*-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{00134 }
\DoxyCodeLine{00135 \textcolor{comment}{/* Tickless idle/low power functionality. */}}
\DoxyCodeLine{00136 \textcolor{preprocessor}{\#ifndef portSUPPRESS\_TICKS\_AND\_SLEEP}}
\DoxyCodeLine{00137     \textcolor{keyword}{extern} \textcolor{keywordtype}{void} vPortSuppressTicksAndSleep( TickType\_t xExpectedIdleTime );}
\DoxyCodeLine{00138 \textcolor{preprocessor}{    \#define portSUPPRESS\_TICKS\_AND\_SLEEP( xExpectedIdleTime ) vPortSuppressTicksAndSleep( xExpectedIdleTime )}}
\DoxyCodeLine{00139 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00140 }
\DoxyCodeLine{00141 \textcolor{comment}{/*-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{00142 }
\DoxyCodeLine{00143 \textcolor{comment}{/* Task function macros as described on the FreeRTOS.org WEB site.  These are}}
\DoxyCodeLine{00144 \textcolor{comment}{not necessary for to use this port.  They are defined so the common demo files}}
\DoxyCodeLine{00145 \textcolor{comment}{(which build with all the ports) will build. */}}
\DoxyCodeLine{00146 \textcolor{preprocessor}{\#define portTASK\_FUNCTION\_PROTO( vFunction, pvParameters ) void vFunction( void *pvParameters )}}
\DoxyCodeLine{00147 \textcolor{preprocessor}{\#define portTASK\_FUNCTION( vFunction, pvParameters ) void vFunction( void *pvParameters )}}
\DoxyCodeLine{00148 \textcolor{comment}{/*-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{00149 }
\DoxyCodeLine{00150 \textcolor{preprocessor}{\#ifdef configASSERT}}
\DoxyCodeLine{00151     \textcolor{keywordtype}{void} vPortValidateInterruptPriority( \textcolor{keywordtype}{void} );}
\DoxyCodeLine{00152 \textcolor{preprocessor}{    \#define portASSERT\_IF\_INTERRUPT\_PRIORITY\_INVALID()  vPortValidateInterruptPriority()}}
\DoxyCodeLine{00153 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00154 }
\DoxyCodeLine{00155 \textcolor{comment}{/* portNOP() is not required by this port. */}}
\DoxyCodeLine{00156 \textcolor{preprocessor}{\#define portNOP()}}
\DoxyCodeLine{00157 }
\DoxyCodeLine{00158 \textcolor{comment}{/*-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{00159 }
\DoxyCodeLine{00160 \textcolor{preprocessor}{\#ifdef \_\_cplusplus}}
\DoxyCodeLine{00161 \}}
\DoxyCodeLine{00162 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00163 }
\DoxyCodeLine{00164 \textcolor{preprocessor}{\#endif }\textcolor{comment}{/* PORTMACRO\_H */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00165 }

\end{DoxyCode}
